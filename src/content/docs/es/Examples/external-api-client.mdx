---
title: Cliente de API Externa
description: Construye un microservicio con Zuno que obtiene datos desde una API externa y los devuelve al cliente.
locale: es
---
import { Code } from '@astrojs/starlight/components'

# ğŸŒ Cliente de API Externa

En este ejemplo, construirÃ¡s un microservicio con Zuno que obtiene datos desde una API externa (por ejemplo, JSONPlaceholder) y los devuelve al cliente. Esto es Ãºtil para:

- Encapsular APIs de terceros
- Agregar datos desde mÃºltiples fuentes
- Construir microservicios que dependen de sistemas externos

---

## ğŸ“¦ Requisitos

Este ejemplo utiliza una biblioteca HTTP ligera para hacer peticiones salientes. Puedes usar cualquier cliente HTTP en C++ (como `cpr`, Boost.Beast o un wrapper sobre libcurl). Para simplificar, usaremos [cpr](https://github.com/libcpr/cpr) vÃ­a `FetchContent`.

---

## ğŸ§± Estructura del Proyecto

<Code
  lang="text"
  code={`external-api-client/
â”œâ”€â”€ CMakeLists.txt
â””â”€â”€ main.cpp`}
/>

---

## ğŸ“„ `CMakeLists.txt`

<Code
  lang="cmake"
  code={`cmake_minimum_required(VERSION 3.20)
project(external_api_client)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

include(FetchContent)

FetchContent_Declare(
  zuno
  GIT_REPOSITORY https://github.com/ZunoFramework/zuno.git
  GIT_TAG        main
)

FetchContent_Declare(
  cpr
  GIT_REPOSITORY https://github.com/libcpr/cpr.git
  GIT_TAG        1.10.4
)

FetchContent_MakeAvailable(zuno cpr)

add_executable(external-api main.cpp)
target_link_libraries(external-api PRIVATE zuno cpr::cpr)`}
/>

---

## ğŸ“„ `main.cpp`

<Code
  lang="cpp"
  code={`#include <zuno/zuno.hpp>
#include <cpr/cpr.h>

int main() {
  zuno::App app;

  app.get("/posts/:id", [](auto& req, auto& res) {
    auto id = req.params["id"];
    auto response = cpr::Get(cpr::Url{std::format("https://jsonplaceholder.typicode.com/posts/{}", id)});

    if (response.status_code == 200) {
      res.status(200).send(response.text);
    } else {
      res.status(502).send("Error al obtener datos externos");
    }
  });

  app.listen(3000);
}`}
/>

---

## ğŸ§ª Probar el Microservicio

<Code
  lang="bash"
  code={`curl http://localhost:3000/posts/1`}
/>

DeberÃ­as recibir una respuesta JSON desde la API externa, reenviada por tu servidor Zuno.

---

## ğŸ§­ PrÃ³ximos Pasos

- Agrega [cachÃ©](/es/extensions/rate-limiting) para reducir la carga externa
- Usa [manejo de errores](/es/guide/error-handling) para mejorar la resiliencia
- Protege el endpoint con [autenticaciÃ³n](/es/examples/authenticated-endpoint)

---

Zuno facilita la creaciÃ³n de microservicios que se comunican con el mundo exteriorâ€”de forma segura y eficiente.
